<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./css/styles.css" rel="stylesheet">
    <title>Login</title>
</head>


<body>
    <nav class="bg-white  border-gray-200 dark:bg-gray-900 shadow-lg">
        <div class="max-w-screen-xl flex flex-wrap items-center justify-start mx-auto p-4">
            <h1 class="text-6xl text-black-500 font-rozha" style="margin-left: -70px;">STARA</h1>
            <!-- <button data-collapse-toggle="navbar-default" type="button"
                class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
                aria-controls="navbar-default" aria-expanded="false">
                <span class="sr-only">Open main menu</span> -->

            <!-- </button> -->
            <div class="hidden w-full md:block md:w-auto" id="navbar-default">
                <ul
                    class="font-normal flex flex-col p-0 md:p-0 mt-4 border style= border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700 ml-9">
                    <li>
                        <a id="home" href="/home.html"
                            class="block py-2 px-3 font-afacad  text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-gray-400 md:p-0 dark:text-white md:dark:hover:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"
                            aria-current="page">Home</a>
                    </li>
                    <li>
                        <a href="#"
                            class="block py-2 px-3 font-afacad  text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-gray-400 md:p-0 dark:text-white md:dark:hover:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Browse</a>
                    </li>
                    <li>
                        <a href="#"
                            class="block py-2 px-3 font-afacad  text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-gray-400 md:p-0 dark:text-white md:dark:hover:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Cart</a>
                    </li>
                    <li>
                        <a href="#"
                            class="block py-2 px-3 font-afacad  text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-gray-400 md:p-0 dark:text-white md:dark:hover:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">View
                            Your Order</a>
                    </li>
                    <li>
                        <a href="#"
                            class="block py-2 px-3 font-afacad  text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-gray-400 md:p-0 dark:text-white md:dark:hover:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Account</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="m-5 p-5">
        <form action="/login" method="POST">
            <h1 class="font-rozha md: text-black text-center text-4xl mt-6"> WELCOME BACK!
            </h1>
            <div class="row justify-content-center">
                <div class="col-md-6 col-12 mr-4">
                    <div class=" form-group font-afacad md: text-black text-center text-xl mt-12">
                        <label for="exampleInputEmail1">Email</label>
                        <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"
                            placeholder="Enter email" name="email" required>
                        <!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone
                    else.</small> -->
                    </div>
                    <div class="form-group font-afacad md: text-black text-center text-xl mt-12">
                        <label for="exampleInputPassword1">Password</label>
                        <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password"
                            name="password" required>
                    </div>
                </div>
            </div>
            <br>
            <button type="submit" class="btn btn-primary font-afacad text-2xl">Login</button>
        </form>
        <form action="/login-guest" method="POST">
            <br>
            <button type="submit" class="btn btn-primary font-afacad text-2xl">Login as Guest</button>
        </form>
        <br>
        <p class="form-text text-muted font-afacad text-xl">Don't have an account? <a href="signup.html">Sign up
                here</a></p>
        <!-- link  -->
    </div>
    <script>
        function checkUserRole() {
            fetch("/checkrole")
                .then(response => {
                    if (!response.ok) {
                        throw new Error('User not logged in or error fetching role');
                    }

                    return response.json();
                })
                .then(data => {
                    setupNavBar(data.role);
                })
                .catch(error => {
                    setupNavBar(0);
                })
        }

        function setupNavBar(role) {
            const home = document.getElementById("home");
            if (role == 0) {
                // No users
                // Right most = Login
                home.innerText = "Home " + role;
                // Remove cart
                // Remove orders
                // Remove account
            } else if (role == 1) {
                // Customer
                // Right most = Logout
                home.innerText = "Home " + role;
                // Show Cart
                // Show Orders
                // Show account
            } else if (role == 2) {
                // Admin
                // Right most = Logout
                home.innerText = "Home " + role;
                // Show Cart
                // Show Orders
                // Show account
                // To the left of Logout Button = Admin Page
            } else if (role == 3) {
                // Developer
                // Right most = Logout
                home.innerText = "Home " + role;
                // Show Cart
                // Show Orders
                // Show account
                // To the left of Logout Button = Developer Page
            }
        }

        window.onload = checkUserRole();

    </script>
</body>

</html>